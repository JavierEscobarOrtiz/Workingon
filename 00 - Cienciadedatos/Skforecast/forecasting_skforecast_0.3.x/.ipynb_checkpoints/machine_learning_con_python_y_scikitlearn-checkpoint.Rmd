---
title: 'Machine Learning con Python y Scikitlearn'
author: "Joaquín Amat Rodrigo  j.amatrodrigo@gmail.com"
date: "Abril, 2020"
output: 
  html_document:
    code_folding: show
    css: /home/ximo/R/x86_64-pc-linux-gnu-library/3.4/rmarkdown/rmd/h/bootstrap/css/journal.min_helvetica_custom.css
    df_print: paged
    fig_height: 3.84
    fig_width: 6
    highlight: tango
    theme: journal
    toc: yes
    toc_float:
      smooth_scroll: yes
  word_document:
    toc: yes
    fig_height: 3.2
    fig_width: 5
---
<base target="_top"/>

<style>
.tocify-header {
text-indent: 1px;
}

.tocify {
  font-size: 15px;
  text-align: left;
  color: #6d6d6d;
}

.list-group-item.active, .list-group-item.active:hover, .list-group-item.active:focus {
    z-index: 2;
    color: #000;
    background-color: #e6e6e6;
    border-color: #fff;
}

h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
color: #1f1f1f;
font-family: 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;
text-align: left;
}

h1.title{
text-align: center;
font-weight: 700;
letter-spacing: -1px;
font-size: 2.2em;
line-height: 1.2;
margin-bottom: .5em;
}

h4.author{
text-align: center;
font-style: normal;
font-weight: normal;
margin-top: 20px;
font-family: 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;
text-shadow: none;
color: #6d6d6d;
}

h4.date{
text-align: center;
font-style: normal;
font-weight: normal;
color: #6d6d6d;
}

body{
text-align: justify;
background-color: #fcfcfc;
font-family: 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;
font-size: 18px;
line-height: 1.5;
font-weight: 400;
text-shadow: none;
color: #333333;
text-rendering: optimizeLegibility;
letter-spacing: +0.1px;
}

.toc-content {
    padding-left: 20px;
    padding-right: 10px;
}

code{
  background-color: #f2f2f2;
  font-family: monospace;
  font-size: 0.9em;
  line-height: 1.4;
  color: #a20505;
}

pre {
    padding: 20px;
    text-shadow: none;
    overflow: auto;
    font-size: 0.8em;
    line-height: 1.4;
}

a {
    color: #d5000d;
}

.list-group-item.active:focus {
    z-index: 2;
    color: #ffffff;
    background-color: #d5000d;
    border-color: #d5000d;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

blockquote {
    border-left: 5px solid #cecece;
    color: #5d686f;
}

.MathJax_Display {
    font-size: medium;
}

.pagedtable table {
    font-size: 14px;
}

.table {
    font-size: small;
}
</style>

```{r global_options, echo=FALSE}
knitr::opts_chunk$set(fig.align = "center")
knitr::opts_chunk$set(message =  FALSE)
knitr::opts_chunk$set(warning = FALSE)
```

<br>
Versión PDF: [Github](https://github.com/JoaquinAmatRodrigo/Estadistica-con-R)

Más sobre ciencia de datos: [cienciadedatos.net](https://cienciadedatos.net) o  [joaquinamatrodrigo.github.io](https://joaquinamatrodrigo.github.io/)

```{r}
library(tidyverse)
library(reticulate)
```

Ejecutar en el terminal

conda create -n py3.8 python=3.8 scikit-learn pandas numpy matplotlib

```{r}
reticulate::conda_list()
```

```{r}
use_condaenv("miniconda3", required = TRUE)
py_config()
```


```{python}
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from matplotlib import colors
from matplotlib import style
import seaborn as sns
from tabulate import tabulate
```

```{python}
datos = pd.read_csv("SaratogaHouses.csv", sep=",")
# Se renombran las columnas para que sean más descriptivas
datos.columns = ["precio", "metros_totales", "antiguedad", "precio_terreno",
                 "metros_habitables", "universitarios", "dormitorios", 
                 "chimenea", "banyos", "habitaciones", "calefaccion",
                 "consumo_calefacion", "desague", "vistas_lago",
                 "nueva_construccion", "aire_acondicionado"]          
```


```{r}
py$datos
```

```{python}
fig, axes = plt.subplots(nrows=3, ncols=1, figsize=(5, 5))
sns.distplot(
    datos.precio,
    hist=False,
    rug=True,
    color="blue",
    kde_kws={'shade': True, 'linewidth': 1},
    ax=axes[0]
)
axes[0].set_title("Distribución original")

sns.distplot(
    np.sqrt(datos.precio),
    hist=False,
    rug=True,
    color="blue",
    kde_kws={'shade': True, 'linewidth': 1},
    ax=axes[1]
)
axes[1].set_title("Transformación raíz cuadrada")

sns.distplot(
    np.log(datos.precio),
    hist=False,
    rug=True,
    color="blue",
    kde_kws={'shade': True, 'linewidth': 1},
    ax=axes[2]
)
axes[2].set_title("Transformación logarítmica")

fig.tight_layout()
plt.show()
```


